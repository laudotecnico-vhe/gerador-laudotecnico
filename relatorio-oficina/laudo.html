<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laudo Técnico - VHE</title>
    <link
      rel="shortcut icon"
      href="https://raw.githubusercontent.com/thaisanbrg/vhe-repo/main/favicon.ico"
      type="image/x-icon"
    />
  </head>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Product Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
    @import url("https://fonts.cdnfonts.com/css/product-sans");

    body{
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Product Sans", sans-serif;
      font-weight: 600;
    }

    @media only screen and (max-width: 768px) {
      body{
        background-color: #f6f6f6;
      }
      .folha{
        width: 400px;
        padding: 5vh;
        gap: 2vh;
      }

      .fonte-bold {
        font-size: 8px;
      }

      .fonte-normal{
        font-size: 6px;
      }

      .titulo .fonte-bold {
        font-size: 16px;
      }

      .titulo .fonte-normal{
        font-size: 8px;
      }

      .secao1 .fonte-bold {
        font-size: 12px;
      }

      .secao2 .fonte-bold {
        font-size: 12px;
      }

      .secao3 .fonte-bold {
        font-size: 12px;
      }


      .logo {
        width: 8vh;
      }

      .footer{
        gap: 1vh;
      }

      .footer .logo_oficina {
        width: 6vh;
      }

      .footer .logo_vhe {
        width: 6vh;
      }

      .info .icone {
        width: 4px;
      }

      .superior{
        gap: 1vh;
      }
  
      .inferior{
       gap: 1vh;
      }

      .logos{
        gap: 3vh;
        height: 20px;
      }

      .fonte-normal1 {
        font-size: 8px;
      }
  

    }

    @media only screen and (min-width: 769px) and (max-width: 1024px) {
      body{
        background-color: #f6f6f6;
      }
      .folha{
        width: 600px;
        padding: 10vh;
        gap: 5vh;
      }

      .fonte-bold {
        font-size: 14px;
      }

      .fonte-normal{
        font-size: 10px;
      }

      .titulo .fonte-bold {
        font-size: 30px;
      }

      .titulo .fonte-normal{
        font-size: 16px;
      }

      .secao1 .fonte-bold {
        font-size: 20px;
      }

      .secao2 .fonte-bold {
        font-size: 20px;
      }

      .secao3 .fonte-bold {
        font-size: 20px;
      }

      .logo {
        width: 15vh;
      }

      .footer{
        gap: 3vh;
      }

      .footer .logo_oficina {
        width: 12vh;
      }

      .footer .logo_vhe {
        width: 12vh;
      }

      .info .icone {
        width: 10px;
      }

      .superior{
        gap: 2vh;
      }
  
      .inferior{
       gap: 2vh;
      }
      
      .infos{
        gap: 1vh;
      }

      .logos{
        gap: 5vh;
        height: 50px;
      }

      .fonte-normal1 {
        font-size: 16px;
      }
  

    }

    @media only screen and (min-width: 1025px) {
      body{
        background-color: #f6f6f6;
      }
      .folha{
        width: 1000px;
        padding: 10vh;
        gap: 5vh;
      }

      .fonte-bold {
        font-size: 18px;
      }

      .fonte-normal{
        font-size: 15px;
      }

      .titulo .fonte-bold {
        font-size: 40px;
      }

      .titulo .fonte-normal{
        font-size: 20px;
      }

      .secao1 .fonte-bold {
        font-size: 30px;
      }

      .secao2 .fonte-bold {
        font-size: 30px;
      }

      .secao3 .fonte-bold {
        font-size: 30px;
      }

      .footer{
        gap: 5vh;
      }

      .infos{
        gap: 2vh;
      }


      .logo {
        width: 20vh;
      }

      .logos{
        gap: 5vh;
        height: 70px;
      }

      .footer .logo_oficina {
        width: 15vh;
      }

      .footer .logo_vhe {
        width: 15vh;
      }

      .info .icone {
        width: 15px;
      }

      .superior{
        gap: 5vh;
      }
  
      .inferior{
       gap: 5vh;
      }
      
      .fonte-normal1 {
        font-size: 20px;
      }
  
    }

    .folha{
      background-color: #fcfcfc;
      height: auto;
      display: flex;
      flex-direction: column;
    }

    .fonte-normal {
      font-weight: 400;
      color: #484745;
      text-align: justify;
    }


    .fonte-normal1 {
      font-weight: 400;
      color: #484745;
      text-align: justify;
    }

    .fonte-bold {
      font-weight: 700;
      color: #484745;
      text-align: left;
    }

    .laudo_header {
      width: 100%;
      display: flex;
      height: auto;
      justify-content: space-between;
    }

    .logo-oficina {
      display: flex;
      align-items: start;
      justify-content: start;
    }

    .info-responsavel {
      display: flex;
      flex-direction: column;
      justify-content: end;
      align-items: end;
    }

    .gap {
      text-align: left;
      display: flex;
      flex-direction: column;
    }

    .titulo{
      width: 100%;
      display: flex;
      flex-direction: column;
      height: auto;
    }

    .secao1{
      width: 100%;
      display: flex;
      height: auto;
    }

    .dados{
      width: 45%;
      display: flex;
      height: auto;
      flex-direction: column;
      word-wrap: break-word;
    }

    .descricao{
      width: 50%;
      display: flex;
      height: auto;
      flex-direction: column;
      word-wrap: break-word;
    }

    .secao2{
      width: 100%;
      display: flex;
      height: auto;
      gap: 5vh;
    }

    .preparacao{
      width: 45%;
      display: flex;
      height: auto;
      flex-direction: column;
      word-wrap: break-word;
    }

    .testes{
      width: 45%;
      display: flex;
      height: auto;
      flex-direction: column;
      word-wrap: break-word;
    }

    .secao3{
      width: 100%;
      display: flex;
      height: auto;
    }

    .procedimento{
      width: 100%;
      display: flex;
      height: auto;
      flex-direction: column;
      word-wrap: break-word;
    }

    .footer{
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logos{
      display: flex;
      width: 40%;
    }

    .infos{
      display: flex;
      flex-direction: column;
      width: auto;
    }

    .superior{
      display: flex;
    }

    .inferior{
      display: flex;
    }

  </style>

  <body>
    <div class="folha"  id="conteudo">

      <div class="laudo_header">
        <div class="logo-oficina">
          <img id="laudo_img_logo1" class="logo" src="./logo oficina.svg" alt="logo" />
        </div>

        <div class="info-responsavel">
          <div class="gap">
            <span class="fonte-bold" style="color: #cccccc">Dados do Responsável</span>
            <span class="fonte-normal" id="laudo_oficina">Oficina:</span>
            <span class="fonte-normal" id="laudo_tecnico">Técnico:</span>
          </div>
        </div>
      </div>

      <div class="titulo">
        <span class="fonte-bold">Laudo Técnico</span>
        <span class="fonte-normal">Veículo Híbrido e Elétrico</span>
      </div>

      <div class="secao1">
        <div class="dados">
          <span class="fonte-bold">Dados do Veículo</span>
            <span class="fonte-normal1" id="laudo_modelo"></span>
            <span class="fonte-normal1" id="laudo_tipo"></span>
            <span class="fonte-normal1" id="laudo_tensao" ></span>
            <span class="fonte-normal1" id="laudo_capacidade"></span>
        </div>

        <div class="descricao">
          <span class="fonte-bold">Descrição</span>
          <span id="laudo_descrição" class="fonte-normal"></span>
        </div>
      </div>

      <div class="secao2">
        <div class="preparacao">
          <span class="fonte-bold">Preparação do Veículo</span>
          <span id="laudo_preparacao" class="fonte-normal"></span><br>
          <img style="max-width: 80%;" id="laudo_img_preparacao" src="" alt="">
        </div>


        <div class="testes">
          <span class="fonte-bold">Testes Preliminares</span>
          <span id="laudo_teste" class="fonte-normal"></span><br>
          <img style="max-width: 74%;" id="laudo_img_teste" src="" alt="">
        </div>
      </div>

      <div class="secao3">
        <div class="procedimento">
          <span class="fonte-bold">Procedimento</span>
          <span id="laudo_procedimento" class="fonte-normal"></span>
          <img style="max-width: 40%; margin-top: 1vh;" id="laudo_img_procedimento" src="" alt="">
        </div>
      </div>
      
      <div class="secao3">
        <div class="procedimento">
          <div class="procedimento">
            <span class="fonte-bold">Conclusão</span>
            <span id="laudo_conclusao" class="fonte-normal" ></span>
            <img style="max-width: 40%; margin-top: 1vh;" id="laudo_img_conclusao" src="" alt="">
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="logos">
          <img id="laudo_img_logo2" class="logo_oficina"  src="" alt="" />
          <img class="logo_vhe" src="./vhe.svg" alt="" />
        </div>

        <div class="infos">
          <div class="superior">
            <div class="info">
              <img class="icone" src="./whatsapp.svg" alt="" />
              <span id="laudo_whatsapp" class="fonte-normal"></span>
            </div>

            <div class="info">
              <img class="icone" src="./telefone.svg" alt="" />
              <span id="laudo_telefone" class="fonte-normal"></span>
            </div>

            <div class="info">
              <img class="icone" src="./mail.svg" alt="" />
              <span id="laudo_email" class="fonte-normal"></span>
            </div>
          </div>

          <div class="inferior">
            <div class="info">
              <img class="icone" src="./pin.svg" alt="" />
              <span id="laudo_endereco" class="fonte-normal"
                ></span
              >
            </div>
          </div>
        </div>
      </div>


    </div>
  </body> 
</html>

<script>
  // Recupera os dados do localStorage
 const dados = JSON.parse(localStorage.getItem('dadosLaudo'));
 
 if (dados) {
   document.getElementById('laudo_oficina').textContent = `Oficina: ${dados.nomeOficina}`;
   document.getElementById('laudo_tecnico').textContent = `Técnico: ${dados.nomeTecnico}`;
   document.getElementById('laudo_modelo').textContent = `Modelo: ${dados.modeloVeiculo}`;
   document.getElementById('laudo_tipo').textContent = `Tipo: ${dados.tipoVeiculo}`;
   document.getElementById('laudo_tensao').textContent = `Tensão: ${dados.tensao}`;
   document.getElementById('laudo_capacidade').textContent = `Capacidade: ${dados.capacidade}`;
   document.getElementById('laudo_descrição').textContent = dados.descricao;
   document.getElementById('laudo_preparacao').textContent = dados.preparacao;
   document.getElementById('laudo_teste').textContent = dados.teste;
   document.getElementById('laudo_procedimento').textContent = dados.procedimentos;
   document.getElementById('laudo_conclusao').textContent = dados.conclusao;
   document.getElementById('laudo_whatsapp').textContent = `${dados.whatsapp}`;
   document.getElementById('laudo_telefone').textContent = `${dados.telefone}`;
   document.getElementById('laudo_email').textContent = `${dados.email}`;
 
   // Incluindo os dados do endereço
   document.getElementById('laudo_endereco').textContent = `${dados.endereco.rua}, ${dados.endereco.numero} - ${dados.endereco.cidade}, ${dados.endereco.estado}`;
 
   // Define as imagens
   document.getElementById('laudo_img_logo1').src = dados.logoOficina || ''; // Se não houver imagem, deixa em branco
   document.getElementById('laudo_img_logo2').src = dados.logoOficina || ''; // Se não houver imagem, deixa em branco
   document.getElementById('laudo_img_preparacao').src = dados.imgPreparacao || ''; // Se não houver imagem, deixa em branco
   document.getElementById('laudo_img_teste').src = dados.imgTeste || ''; // Se não houver imagem, deixa em branco
   document.getElementById('laudo_img_procedimento').src = dados.imgProcedimentos || ''; // Se não houver imagem, deixa em branco
   document.getElementById('laudo_img_conclusao').src = dados.imgConclusao || ''; // Se não houver imagem, deixa em branco
 
   // Chama a função gerarPDF após 2 segundos
   setTimeout(gerarPDF, 2000);
 } else {
   alert('Nenhum dado encontrado!');
 }
 
 function gerarPDF() {
   const { jsPDF } = window.jspdf;
   const content = document.getElementById('conteudo');
 
   html2canvas(content, { scale: 3 }).then(canvas => {
     const imgData = canvas.toDataURL('image/png');
 
     const imgWidth = 210; // Largura A4 em mm
     const imgProps = canvas.width / canvas.height;
     const pdfHeight = imgWidth / imgProps;
 
     const pdf = new jsPDF('p', 'mm', [imgWidth, pdfHeight]);
 
     pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, pdfHeight);
     pdf.save("laudo-tecnico.pdf");
   });
 };
 </script> 






